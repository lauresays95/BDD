<?php $title = 'Phytopinax - Fiche savant';// Le section name apparait dans le cadre vert en haut de la fiche$sectionName = $informations['pe_nom']; ?><?php ob_start(); ?>    <main class="corpsPage">        <!-- TODO Après lien avec la BDD, faire en sorte que les champs ne s'affichent que s'ils sont remplis dans la BDD -->        <!-- Chaque if représente une catégorie apparaissant sur la fiche et s'adapte en fonction des données existantes -->        <?php if ($informations['pe_image_url']) { ?>            <figure class="figure" style="display: block; float : right">                <img src="<?= $informations['pe_image_url']; ?>" alt="<?= $informations['pe_legende_image']; ?>"                     class="figure-img img-fluid rounded" width="200 px" height="auto">                <?php if ($informations['pe_image_url']) { ?>                    <figcaption class="figure-caption" style="text-align: center;"><?= $informations['pe_legende_image']; ?></figcaption>                <?php } ?>            </figure>        <?php } ?>        <div style="width: 66%">            <div class="row">                <div class="col-lg-3 col-12">                    <h6>Nom</h6>                </div>                <div class="col-12 col-lg">                    <?= $informations['pe_nom'] ?>                </div>            </div>            <br>            <?php if ($alias != []) { ?>                <div class="row">                    <div class="col-lg-3 col-12">                        <?php if (count($alias) == 1) {                            print '<h6>Nom Alternatif</h6>';                        } else {                            print'<h6>Noms Alternatifs</h6>';                        } ?>                    </div>                    <div class="col-12 col-lg">                        <ul>                            <?php                            foreach ($alias as $pseudonyme) {                                print '<li>' . $pseudonyme["pe_alias_nom"] . '</li>';                            } ?>                        </ul>                    </div>                </div>                <br>            <?php } ?>            <?php if ($informations["pe_identifiant_isni"] != NULL) { ?>                <div class="row">                    <div class="col-lg-3 col-12">                        <h6>Identifiant ISNI</h6>                    </div>                    <div class="col-12 col-lg">                        <?= $informations["pe_identifiant_isni"]; ?>                    </div>                </div>                <br><?php } ?>            <?php if ($informations["pe_identifiant_viaf"] != NULL) { ?>                <div class="row">                    <div class="col-lg-3 col-12">                        <h6>Identifiant VIAF</h6>                    </div>                    <div class="col-12 col-lg">                        <?= $informations["pe_identifiant_viaf"]; ?>                    </div>                </div>                <br><?php } ?>            <?php if ($informations['pe_date_naissance_deb_annee'] != null and $informations['FK_id_lg_naissance'] != null) { ?>                <div class="row">                    <div class="col-lg-3 col-12">                        <h6>Naissance</h6>                    </div>                    <?php if ($informations['pe_date_naissance_deb_annee'] != null) { ?>                        <div class="col-lg-3 col-12">                            <?= viewDate($informations, "pe_date_naissance"); ?>                        </div>                    <?php } ?>                    <?php if ($informations['FK_id_lg_naissance'] != null) { ?>                        <div class="col-lg-3 col-12">                            <?= $lgNaissance[0]['lg_nom']; ?>                        </div>                    <?php } ?>                </div>                <br>            <?php } ?>            <?php if ($informations['pe_date_mort_deb_annee'] != null and $informations['FK_id_lg_deces'] != null) { ?>                <div class="row">                    <div class="col-lg-3 col-12">                        <h6>Mort</h6>                    </div>                    <?php if ($informations['pe_date_mort_deb_annee'] != null) { ?>                        <div class="col-lg-3 col-12">                            <?= viewDate($informations, "pe_date_mort"); ?>                        </div>                    <?php } ?>                    <?php if ($informations['FK_id_lg_naissance'] != null) { ?>                        <div class="col-lg-3 col-12">                            <?= $lgMort[0]['lg_nom']; ?>                        </div>                    <?php } ?>                </div>                <br>            <?php } ?>            <?php if ($confessions != []) { ?>                <div class="row">                    <div class="col-lg-3 col-12">                        <?php if (count($confessions) == 1) {                            print '<h6>Confession</h6>';                        } else {                            print'<h6>Confessions</h6>';                        } ?>                    </div>                    <div class="col-12 col-lg">                        <ul>                            <?php                            foreach ($confessions as $conf) { ?>                                <li>                                    <?= $conf["pe_confession"]; ?>                                    <?php                                    print('( ');                                    print(viewDate($conf, "pe_conf_date"));                                    print(' )');                                    if (isset($conf["rel_pe_conf_commentaire"])) {                                        ?>                                        : <br>                                        <?= $conf["rel_pe_conf_commentaire"];                                    }                                    ?>                                </li>                            <?php } ?>                        </ul>                    </div>                </div>                <br>            <?php } ?>            <?php if ($formations != []) { ?>            <div class="row">                <div class="col-lg-3 col-12">                    <?php if (count($formations) == 1) {                        print'<h6>Formation</h6>';                    } else {                        print'<h6>Formations</h6>';                    }                    ?>                </div>                <div class="col-12 col-lg">                    <ul>                        <?php foreach ($formations as $form) {                            ?>                            <li>                                <?php                                print ($form[0]['pe_form_discipline']);                                if (isset($form[0]['pe_form_date_deb_annee'])) {                                    print(' ( ');                                    viewDate($form[0], "pe_form_date");                                    print(' )');                                }                                if ($form[0]['FK_id_pe_form_grade'] != NULL || $form[0]['FK_id_lg_lieu_geographique'] != NULL || $form[0]['pe_form_commentaire'] != NULL) {                                    print' :';                                    if ($form[0]['FK_id_pe_form_grade'] != NULL) {                                        print '<br><span><u>Grade :</u> </span>' . $form[0]['pe_form_grade'];                                    }                                    if ($form[0]['FK_id_lg_lieu_geographique'] != NULL) {                                        print '<br><span><u>Lieu :</u> </span>' . $form[0]['lg_nom'];                                    }                                    if ($form[0]['pe_form_commentaire'] != NULL) {                                        print '<br><span><u>Commentaire :</u> </span>' . $form[0]['pe_form_commentaire'];                                    }                                }                                ?>                            </li>                            <br>                            <?php                        } ?>                </div>            </div>        </div>    <br>    <?php } ?>        <?php if ($relations != []) {            ?>            <div class="row">                <div class="col-2">                    <?php if (count($relations) == 1) {                        print'<h6>Relation</h6>';                    } else {                        print'<h6>Relations</h6>';                    }                    ?>                </div>                <div class="col-12 col-lg">                    <ul>                        <?php foreach ($relations as $rel) { ?>                            <li>                                <div class="row-12">                                    <div class="col-lg-6 col-12">                                        <?= $rel[0]['pe_nom']; ?>                                    </div>                                    <div class="col-lg-6 col-12">                                        <?php if ($rel[0]['FK_id_pe_type_relation'] != null) {                                            print '<u>Type de relation :</u> ' . $rel[0]['pe_type_relation'];                                        } ?>                                        <?php if ($rel[0]['pe_relation_commentaire'] != null) { ?>                                            <br>                                            <?= $rel[0]['pe_relation_commentaire']; ?>                                        <?php } ?>                                    </div>                                </div>                            </li>                            <br>                        <?php } ?>                    </ul>                </div>            </div>            <br>        <?php } ?>        <?php if ($controverses != []) { ?>            <div class="row">                <div class="col-lg-3 col-12">                    <?php if (count($controverses) == 1) {                        print '<h6>Controverse traitée</h6>';                    } else {                        print'<h6>Controverses traitées</h6>';                    } ?>                </div>                <div class="col-12 col-lg">                    <ul>                        <?php                        foreach ($controverses as $contro) { ?>                            <li><?= $contro["controverse_nom"]; ?></li><?php                        } ?>                    </ul>                </div>            </div>            <br>        <?php } ?>        <br>        <?php if ($informations['pe_commentaire'] != null) { ?>            <div class="row">                <div class="col-lg-3 col-12">                    <h6>Informations complémentaires</h6>                </div>                <div class="col-lg col-12">                    <?= $informations['pe_commentaire']; ?>                </div>            </div>            <br>        <?php } ?>        <?php //TODO terminer la bib ! ?>        <!--        <div class="row">-->        <!--            <div class="col-3">-->        <!--                <h6>Sources</h6>-->        <!--            </div>-->        <!--            <div class="col">-->        <!--                [Infos récupérées depuis BDD (bibliographie)]-->        <!--            </div>-->        <!--        </div>-->        <!---->        <!--        </div>-->        <br>        <?php if ($etapes != []) { ?>            <div class="row">                <div class="col">                    <div id="map" style="height: 50vh; width=66vw;"></div>                    <script type="text/javascript">                        // définition de la carte et ses valeurs                        var map = L.map("map").setView([48.85, 2.35], 10);                        var markers = L.markerClusterGroup();                        var posForAutoCenter = [];                        console.log(addressPoints);                        for (var i = 0; i < addressPoints.length; i++) {                            var a = addressPoints[i];                            var title = a[2];                            var marker = L.marker(new L.LatLng(a[0], a[1]), {title: title});                            marker.bindPopup(title);                            markers.addLayer(marker);                            posForAutoCenter.push(L.marker([a[0], a[1]]));                        }                        var group = L.featureGroup(posForAutoCenter);                        setTimeout(function () {                            map.fitBounds(group.getBounds());                        }, 500);                        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {}).addTo(map);                        map.addLayer(markers);                    </script>                </div>            </div>            <br>        <?php } ?>    </main><?php $content = ob_get_clean(); ?><?php require('../view/template_with_title.php'); ?>